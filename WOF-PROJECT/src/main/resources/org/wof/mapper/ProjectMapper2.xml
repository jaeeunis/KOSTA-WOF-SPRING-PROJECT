<?xml version="1.0" encoding="UTF-8"?>
 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.wof.mapper.ProjectMapper2">


	<!-- 추천 프로젝트 페이징-->
<!-- 		<select id="pageWithProject" resultType="org.wof.domain.ProjectVO">
		<![CDATA[
		select proj_id, proj_work_place, proj_detaiil, proj_reqr_skill, proj_career
		from(
		select 
		rownum rn, p.proj_id,  p.proj_work_place, p.proj_detaiil, p.proj_reqr_skill, p.proj_career
		from followproject fp, project p, partner pn
		where fp.related_project = p.proj_id
        and pn.member_no = fp.related_member
		and pn.member_no = #{member_no}
		and rownum <= #{standard.pageNum} * #{standard.amount}
		)
		where rn > (#{standard.pageNum} -1) * #{standard.amount}
		]]>
	</select>  -->
	
		<select id="projectList" resultType="org.wof.domain.ProjectVO">
			select * from project
		</select>
	
	<select id="projectList2" parameterType="java.lang.String" resultType="org.wof.domain.ProjectVO">
			select * from project where proj_id = #{proj_id}
	</select>
	
	<select id="totalProject" resultType="java.lang.Integer">
		select count(*) from project
	</select>
	
	<select id="listRecommendProject" parameterType="org.wof.domain.PartnersVO" resultType="org.wof.domain.ProjectVO">
		select p.* from project p where p.proj_work_place like '%' || #{prefered_area} || '%' and p.proj_reqr_skill like '%' || #{skill} || '%'
	</select>
	   
   <!-- 관심 프로젝트 -->
   <insert id="addFollowProject" parameterType="org.wof.domain.FollowProjectVO">
   <![CDATA[
      INSERT INTO followproject VALUES ('followproject'|| followproject_seq.nextval, #{related_project}, #{related_member}, sysdate)
    ]]>
   </insert>
   
   <delete id="deleteFollowProject" parameterType="java.lang.String">
   		delete from followproject where followproject_no = #{followproject_no}
   </delete> 
   
   <select id="listFollowProject" parameterType="java.lang.String"  resultType="org.wof.domain.ProjectVO">
   	select p.* from followproject fp, project p 
   	where fp.related_member = #{related_member} and p.proj_id = fp.related_project
   </select>
   
   <select id="detailFollowProject" parameterType="org.wof.domain.FollowProjectVO" resultType="org.wof.domain.FollowProjectVO">
   	select * from followproject where related_member = #{related_member} and related_project = #{related_project}
   </select>
   
   <!-- project status -->
   <update id="projectStatusUpdate">
    <![CDATA[
   update project set proj_status = 2 where proj_start_date <= sysdate
    ]]>
   </update>
   
   <select id="listMeeting" parameterType="java.lang.String" resultType="org.wof.domain.MeetVO">
   	<![CDATA[
   		select * from meet where meet_req_mem = #{meet_req_mem}
   ]]>
   </select>
   
   <insert id="addMeeting" parameterType="org.wof.domain.MeetVO">
   	   <![CDATA[
      INSERT INTO meet VALUES ('meet'|| meet_seq.nextval, #{meet_req_mem}, #{meet_type}, #{meet_datetime}, #{meet_contents})
      ]]>
   </insert>
   
   <delete id="deleteMeeting" parameterType="java.lang.String">
   	delete from meet where meet_id = #{meet_id}
   </delete>
   

</mapper>